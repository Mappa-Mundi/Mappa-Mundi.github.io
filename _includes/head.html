<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="language" content="en">
  <meta name="geo.region" content="US">
  <meta name="geo.placename" content="United States">
  
  <!-- Performance Optimizations -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://kit.fontawesome.com">
  <link rel="dns-prefetch" href="https://d3nn82uaxijpm6.cloudfront.net">
  
  <!-- Preload critical resources -->
  <link rel="preload" href="/assets/main.css" as="style">
  <link rel="preload" href="/assets/images/optimized/screenshot.webp" as="image" type="image/webp">
  <link rel="preload" href="/assets/images/optimized/MappaMundiLogo.webp" as="image" type="image/webp">
  
  <!-- Primary Meta Tags -->
  {% if page.seo_title %}
  <title>{{ page.seo_title }}</title>
  <meta name="title" content="{{ page.seo_title }}">
  {% elsif page.title %}
  <title>{{ page.title }} | {{ site.title }}</title>
  <meta name="title" content="{{ page.title }} | {{ site.title }}">
  {% else %}
  <title>Mappa Mundi - Find Historic Locations Near You | Historical Discovery App</title>
  <meta name="title" content="Mappa Mundi - Find Historic Locations Near You | Historical Discovery App">
  {% endif %}
  
  {% if page.meta_description %}
  <meta name="description" content="{{ page.meta_description }}">
  {% elsif page.excerpt %}
  <meta name="description" content="{{ page.excerpt | strip_html | strip_newlines | truncate: 155 }}">
  {% else %}
  <meta name="description" content="Discover historically significant locations near you with Mappa Mundi. Find historic buildings, battlefields, castles, forts, and local markers across the United States and Europe. Download our mobile app for iOS.">
  {% endif %}
  
  {% if page.keywords %}
  <meta name="keywords" content="{{ page.keywords }}, {{ site.keywords }}">
  {% elsif page.tags %}
  <meta name="keywords" content="{{ page.tags | join: ', ' }}, {{ site.keywords }}">
  {% else %}
  <meta name="keywords" content="historical locations, historic buildings, battlefields, castles, forts, local history, historical discovery app, history app, mobile app, iOS, United States, Europe, historical sites, heritage, cultural landmarks, historical markers, ancient sites, medieval castles, military forts, revolutionary war sites, civil war battlefields">
  {% endif %}
  
  {% if page.author %}
  <meta name="author" content="{{ page.author }}">
  {% else %}
  <meta name="author" content="Ian Haynes">
  {% endif %}
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  
  <!-- Open Graph / Facebook -->
  {% if page.layout == 'post' %}
  <meta property="og:type" content="article">
  <meta property="article:author" content="{{ page.author | default: site.author }}">
  <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
  {% if page.tags %}
  {% for tag in page.tags %}
  <meta property="article:tag" content="{{ tag }}">
  {% endfor %}
  {% endif %}
  {% else %}
  <meta property="og:type" content="website">
  {% endif %}
  
  <meta property="og:url" content="{{ site.url }}{{ page.url | default: '/' }}">
  {% if page.title %}
  <meta property="og:title" content="{{ page.title }} | {{ site.title }}">
  {% else %}
  <meta property="og:title" content="Mappa Mundi - Find Historic Locations Near You">
  {% endif %}
  
  {% if page.meta_description %}
  <meta property="og:description" content="{{ page.meta_description }}">
  {% elsif page.excerpt %}
  <meta property="og:description" content="{{ page.excerpt | strip_html | strip_newlines | truncate: 155 }}">
  {% else %}
  <meta property="og:description" content="Discover historically significant locations near you with Mappa Mundi. Find historic buildings, battlefields, castles, forts, and local markers across the United States and Europe.">
  {% endif %}
  
  {% if page.image %}
  <meta property="og:image" content="{{ site.url }}{{ page.image }}">
  {% else %}
  <meta property="og:image" content="https://mappamundi.us/assets/images/MappaMundiLogo.png">
  {% endif %}
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Mappa Mundi">
  <meta property="og:locale" content="en_US" />
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="{{ site.url }}{{ page.url | default: '/' }}">
  {% if page.title %}
  <meta property="twitter:title" content="{{ page.title }} | {{ site.title }}">
  {% else %}
  <meta property="twitter:title" content="Mappa Mundi - Find Historic Locations Near You">
  {% endif %}
  
  {% if page.meta_description %}
  <meta property="twitter:description" content="{{ page.meta_description }}">
  {% elsif page.excerpt %}
  <meta property="twitter:description" content="{{ page.excerpt | strip_html | strip_newlines | truncate: 155 }}">
  {% else %}
  <meta property="twitter:description" content="Discover historically significant locations near you with Mappa Mundi. Find historic buildings, battlefields, castles, forts, and local markers.">
  {% endif %}
  
  {% if page.image %}
  <meta property="twitter:image" content="{{ site.url }}{{ page.image }}">
  {% else %}
  <meta property="twitter:image" content="https://mappamundi.us/assets/images/MappaMundiLogo.png">
  {% endif %}
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{{ site.url }}{{ page.url | default: '/' }}" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/assets/images/MappaMundiLogo.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  
  <!-- Structured Data for Mobile App -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "MobileApplication",
    "name": "Mappa Mundi",
    "description": "A mobile app that helps users discover historically significant locations near them, including historic buildings, battlefields, castles, forts, and local markers across the United States and Europe.",
    "url": "https://mappamundi.us",
    "applicationCategory": "TravelApplication",
    "operatingSystem": "iOS",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Person",
      "name": "Ian Haynes"
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.5",
      "ratingCount": "100"
    },
    "screenshot": [
      "https://mappamundi.us/assets/images/screenshot.png",
      "https://mappamundi.us/assets/images/building-screenshot.png",
      "https://mappamundi.us/assets/images/castle-screenshot.png",
      "https://mappamundi.us/assets/images/battle-screenshot.png",
      "https://mappamundi.us/assets/images/local-screenshot.png"
    ],
    "downloadUrl": [
      "https://apps.apple.com/us/app/mappa-mundi/id6451006755"
    ]
  }
  </script>
  
  <!-- Organization Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Mappa Mundi",
    "url": "https://mappamundi.us",
    "logo": "https://mappamundi.us/assets/images/MappaMundiLogo.png",
    "description": "Mobile app for discovering historically significant locations near you",
    "sameAs": [
      "https://apps.apple.com/us/app/mappa-mundi/id6451006755"
    ],
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "customer service",
      "email": "contact@mappamundi.us"
    }
  }
  </script>
  
  <!-- WebSite Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Mappa Mundi",
    "url": "https://mappamundi.us",
    "description": "Discover historically significant locations near you with Mappa Mundi. Find historic buildings, battlefields, castles, forts, and local markers.",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://mappamundi.us/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  
  <!-- SoftwareApplication Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Mappa Mundi",
    "applicationCategory": "TravelApplication",
    "operatingSystem": "iOS",
    "description": "Discover historically significant locations near you with our mobile app",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "downloadUrl": [
      "https://apps.apple.com/us/app/mappa-mundi/id6451006755"
    ]
  }
  </script>
  
  <!-- Jekyll SEO tag -->
  <meta name="generator" content="Jekyll v3.9.3" />
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="/assets/main.css">
  <link type="application/atom+xml" rel="alternate" href="https://mappamundi.us/feed.xml" title="Mappa Mundi" />
  
  <!-- JavaScript - Load non-critical scripts asynchronously -->
  <script src="/assets/javascript/bootstrap/jquery.min.js" defer></script>
  <script src="/assets/javascript/bootstrap/bootstrap.bundle.min.js" defer></script>
  <script src="https://kit.fontawesome.com/212d2f84a8.js" crossorigin="anonymous" defer></script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('SW registered: ', registration);
          })
          .catch(registrationError => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }
  </script>
</head>
